from SqliteDatabase import SqliteDatabase


class RequestHandler:
    def __init__(self):
        self.sqlite_database = SqliteDatabase()
        self.logged_users = []

    def login_user(self, user_request):
        username, password = user_request.split(',')[1], user_request.split(',')[2]

        if username in self.logged_users:
            return "error,User is already logged in"

        if self.sqlite_database.is_user_exist(username) and self.sqlite_database.is_password_match(username, password):
            return "ok"

        else:
            return "error,Username or password incorrect"
