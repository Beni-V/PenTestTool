import sqlite3
import os.path


class SqliteDatabase:

    def __init__(self):
        if os.path.isfile('./pen_test_tool_db.db'):
            self.sqlite_connection = sqlite3.connect('pen_test_tool_db.db')
            self.cursor = self.sqlite_connection.cursor()
        else:
            self.sqlite_connection = sqlite3.connect('pen_test_tool_db.db')
            self.cursor = self.sqlite_connection.cursor()

            sqlite_select_query = "CREATE TABLE users (username TEXT, password TEXT, website TEXT);"
            self.cursor.execute(sqlite_select_query)

    def is_user_exist(self, username):
        self.cursor.execute('SELECT COUNT(*) FROM USERS WHERE USERNAME = "%s";' % username)
        return bool(self.cursor.fetchall()[0][0])
